
@{
    ViewBag.Title = "RADA Logistics - Request Container";
}

<link href="~/Stylee/HisensePages.css" rel="stylesheet" />

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<div class="container" style="text-align: center; width: 100%; height: 100%">

    <div style="text-align: center; min-width: 100%; ">

        <style>
            .page-title {
                text-align: center;
                font-size: 21px;
                font-weight: 700;
                color: #2c3e50;
                margin-bottom: 15px;
                letter-spacing: 0px;
            }

            .section-subtitle {
                text-align: center;
                font-size: 17px;
                font-weight: 500;
                color: #555;
                margin-bottom: 25px;
            }
        </style>

        <h2 class="page-title">Request for Container Movements</h2>
        <h4 class="section-subtitle">Movement Request Overview</h4>

        <hr>
     
        <div style=" display: flex; justify-content: center; align-items: center; height: auto;">
            <button class="animated-button" onclick="location.href='@Url.Action("RadaHome", "Home")'">
                <svg xmlns="http://www.w3.org/2000/svg" class="arr-2" viewBox="0 0 24 24">
                    <path d="M16.1716 10.9999L10.8076 5.63589L12.2218 4.22168L20 11.9999L12.2218 19.778L10.8076 18.3638L16.1716 12.9999H4V10.9999H16.1716Z"></path>
                </svg>
                <span class="text"> Return to back Home </span>
                <span class="circle"></span>
                <svg xmlns="http://www.w3.org/2000/svg" class="arr-1" viewBox="0 0 24 24">
                    <path d="M16.1716 10.9999L10.8076 5.63589L12.2218 4.22168L20 11.9999L12.2218 19.778L10.8076 18.3638L16.1716 12.9999H4V10.9999H16.1716Z"></path>
                </svg>
            </button>
        </div>
        <hr>

        @using (Html.BeginForm("ProcessData", "HISENSE", FormMethod.Post))
        {


            <p style="text-align: center;">&nbsp;</p>
            <h5 class="Tittlelabel" style=" font-weight: 700; color: #5264AE"> Username Overview </h5>
            <hr style="border: 1px solid #CECECE; width: 35vh; margin: 5px auto ">
            <p style="text-align: center;">&nbsp;</p>

            <div class="group">
                <input style="font-size:12px" readonly="@true" type="text" id="User" name="User" value="@ViewBag.User" required>
                <span class="highlight"></span>
                <span class="bar"></span>
            </div>

            <h5 class="Tittlelabel" style=" font-weight: 700; color: #5264AE"> Container Overview </h5>
            <hr style="border: 1px solid #CECECE; width: 35vh; margin: 5px auto ">
            <p style="text-align: center;">&nbsp;</p>

            <h5 class="Tittlelabel" style=" font-weight: 700; color: #5264AE">Status:</h5>
            <div class="group">
                <select name="Type" id="Type" class="form-control" style="max-width: 30vh; color: black;  text-align: center ">

                    <option value="CAR"> CAR </option>
                    <option value="VAC"> VAC </option>

                </select>
</div>

            <h5 class="Tittlelabel" style=" font-weight: 700; color: #5264AE">Area:</h5>
            <div class="group" style="padding: 5px 0px 0px 0px">
                <select name="Area" id="Area" class="form-control" style="max-width: 30vh; color: black; text-align: center">
                    @foreach (var person in ViewBag.listed)
                    {
                        <option value="@person.Area">@person.Area</option>
                    }
                </select>
            </div>

            <div id="checkboxContainer">
                <h5 class="Tittlelabel" style=" font-weight: 700; color: #5264AE">
                    Is the container in the Crane?
                </h5>
                @Html.CheckBox("Activo", new { id = "chkActivo" })
                <label for="chkActivo">Activo</label>
            </div>
            <input type="hidden" name="ActivoHidden" id="ActivoHidden"  value="NO" />

            <p style="text-align: center;">&nbsp;</p>
            <p style="text-align: center;">&nbsp;</p>

            <div class="group">
                <input style="font-size: 15px; background-color: #F3F5F8; " type="text" id="Container" name="Container" required>
                <span class="highlight"></span>
                <span class="bar"></span>
                <label>Enter your Container:</label>
            </div>

            <div class="group">
                <input style="font-size: 15px; background-color: #F3F5F8; " type="text" id="Origins" name="Origins" required>
                <span class="highlight"></span>
                <span class="bar"></span>
                <label>Origins Location:</label>
            </div>

            <div class="group">
                <input style="font-size: 15px; background-color: #F3F5F8; " type="text" id="Destination" name="Destination" required>
                <span class="highlight"></span>
                <span class="bar"></span>
                <label>Destination Location:</label>
            </div>

            <p style="text-align: center;">&nbsp;</p>
            <button type="submit" class="Bto_saved">
                ✅ Save
            </button>
            <p style="text-align: center;">&nbsp;</p>
            <p style="text-align: center;">&nbsp;</p>
        }

    </div>

</div>

<p style="text-align: center;">&nbsp;</p>
<h4 style="text-align:center;font-weight: 700" class="Tittlelabel" > Request Recently Requested Containers </h4>
<h5 style="text-align:center" class="Tittlelabel"> Total Records: @ViewBag.Count</h5>

<ul class="responsive-table">

    <li class="table-header" id="tableData">

        <div class="col col-4" style="text-align:center">Folio</div>

        @*<div class="col col-2" style="text-align:center">Who Request</div>*@

        <div class="col col-4" style="text-align:center">Container</div>

        <div class="col col-4" style="text-align:center">Destination</div>

        <div class="col col-5" style="text-align:center">Origins</div>

        <div class="col col-6" style="text-align:center">Status</div>
        
        <div class="col col-2" style="text-align:center">Message</div>

        <div class="col col-6" style="text-align:center">Area</div>

        <div class="col col-8" style="text-align:center">Date</div>

        <div class="col col-4" style="text-align:center">Options</div>
    </li>

    <div id="tabla-container">
        @Html.Partial("table") <!-- Cargar la tabla al inicio -->
    </div>

</ul>

<script>
    function actualizarTabla() {
        $.ajax({
            url: '/HISENSE/ActualizarTabla', // Llama al método en el controlador
            type: 'GET',
            success: function (data) {
                $("#tabla-container").html(data); // Reemplaza la tabla con la nueva versión
                console.log("Tabla actualizada.");
            },
            error: function () {
                console.log("Error al actualizar la tabla.");
            }
        });
    }

    // Llamar la función cada 1 minuto (60,000 milisegundos)
    setInterval(actualizarTabla, 60000);
</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        document.getElementById("chkActivo").addEventListener("change", function () {
            document.getElementById("ActivoHidden").value = this.checked ? "SI" : "NO";
        });
    });
</script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
    $(document).ready(function () {

        // Cuando cambie la selección
        $('#Area').on('change', function () {
            var selected = $(this).val().toUpperCase();

            if (selected === 'ENVIOS' || selected === 'PT') {
                // Oculta el checkbox y cambia el valor a NO
                $('#checkboxContainer').hide();
                $('#chkActivo').prop('checked', false);
                $('#ActivoHidden').val('NO');
            } else {
                // Muestra el checkbox
                $('#checkboxContainer').show();
            }
        });

        // También actualiza el valor del hidden cuando se cambia el checkbox
        $('#chkActivo').on('change', function () {
            $('#ActivoHidden').val(this.checked ? 'SI' : 'NO');
        });

        // Ejecuta el cambio al cargar la página para aplicar la lógica inicial
        $('#Area').trigger('change');
    });
</script>

<p style="text-align: center;">&nbsp;</p>
<p style="text-align: center;">&nbsp;</p>